---
# sensor til NAS TheCloud
#
# https://github.com/EvisHome/home-assistant/tree/main/dashboards/synology-dashboard
#
#
platform: template
sensors:
  thecloud_free_space:
    friendly_name: "TheCloud Free Space"
    unit_of_measurement: "TB"
    availability_template: >-
      {{ states('sensor.thecloud_volume_1_total_size') not in ['unknown','unavailable',''] and
         states('sensor.thecloud_volume_1_used_space') not in ['unknown','unavailable',''] }}
    value_template: >-
      {% set total = states('sensor.thecloud_volume_1_total_size')|replace('Tb','')|float(0) %}
      {% set used  = states('sensor.thecloud_volume_1_used_space')|replace('Tb','')|float(0) %}
      {{ (total - used) | round(2) }}

  deskstation_free_space:
    friendly_name: "DeskStation Free Space"
    unit_of_measurement: "TB"
    availability_template: >-
      {{ states('sensor.diskstation_volume_1_total_size') not in ['unknown','unavailable',''] and
         states('sensor.diskstation_volume_1_used_space') not in ['unknown','unavailable',''] }}
    value_template: >-
      {% set total = states('sensor.diskstation_volume_1_total_size')|replace('Tb','')|float(0) %}
      {% set used  = states('sensor.diskstation_volume_1_used_space')|replace('Tb','')|float(0) %}
      {{ (total - used) | round(2) }}
