---
#
#
# Hue scenes
#
# https://community.home-assistant.io/t/select-activate-hue-scenes-in-new-v2-api-setup/356057/27
#
  
  - binary_sensor:
    - unique_id: selected_hue_group_active_scene
      name: Selected Hue group active scene
      state: >
        {% set select = states('input_select.hue_group')|slugify %}
        {% set group ='light.' + select %}
        {{is_state_attr(group,'dynamics',true)}}

  - binary_sensor:
    - unique_id: selected_hue_group_has_active_scenes_available
      name: Selected Hue group has active scenes available
      state: >
          {% set hue_group = states('input_select.hue_group') %}
          {{states.scene
          |selectattr('attributes.group_name','eq',hue_group)
          |selectattr('attributes.is_dynamic','eq',true)|list|length != 0}}

  - binary_sensor:
    - unique_id: hue_groups_dynamic_scening
      name: Hue groups dynamic scening
      state: >
        {{states.light|selectattr('attributes.dynamics','eq',true)|list|length != 0}}

#        {% set select = states('input_select.hue_group') %}
#        {% set group = states.light
#          |selectattr('attributes.friendly_name','eq',select)
#          |map(attribute='entity_id')|join %}
#        {{is_state_attr(group,'dynamics',true)}}